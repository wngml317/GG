<!DOCTYPE html>
<html lang="en">

<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="">
  <meta name="author" content="">

  <title>RECYCLE</title>


  <!-- Bootstrap core CSS -->
  <link href="../../../static/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">

  <link href="../../../static/vendor/bootstrap/css/style.css" rel="stylesheet">

  <!-- Custom fonts for this template -->
  <link href="../../../static/vendor/fontawesome-free/css/all.min.css" rel="stylesheet">
  <link href="../../../static/vendor/simple-line-icons/css/simple-line-icons.css" rel="stylesheet" type="text/css">
  <link href="https://fonts.googleapis.com/css?family=Lato:300,400,700,300italic,400italic,700italic" rel="stylesheet" type="text/css">

  <!-- Custom styles for this template -->
  <link href="../../../static/css/landing-page.min.css" rel="stylesheet">

</head>

<body>

  <!-- Navigation -->
  <nav class="navbar fixed-top navbar-expand-sm bg-white navbar-white">
    <!-- Brand -->
    <div class="col-lg-4">
    <a class="navbar-brand" href="/"  style="padding-left: 50px;">
      <img src="../../../static/img/logoG.png" width="45px" height="40px">
      <img src="../../../static/img/logoG.png" width="45px" height="40px">
    </a>
  </div>
    <!-- Links -->
    <ul class="navbar-nav">
      <!-- Dropdown -->

      <li class="nav-item dropdown">
        <a class="nav-link dropdown-toggle" href="#" id="navbardrop" data-toggle="dropdown">
          분리배출요령
        </a>
        <div class="dropdown-menu">
          <a class="dropdown-item" href="paper">종이류, 종이팩</a>
          <a class="dropdown-item" href="can">금속캔, 고철</a>
          <a class="dropdown-item" href="glass">유리병류</a>
          <a class="dropdown-item" href="plastic">플라스틱 용기류</a>
          <a class="dropdown-item" href="vinyl">비닐류</a>
          <a class="dropdown-item" href="styrofoam">스티로폼(발포합성수지)</a>
        </div>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="search" style="padding-left: 50px;">품목 검색</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="#" style="padding-left: 50px;">Q & A</a>
      </li>
    </ul>
  </nav>
    <br><br><br><br>
  <div class="container my-3">
    <h2 class="border-bottom py-2">{{ question.subject }}</h2>
    <div class="card my-3">
      <div class="card-body">
        <div class="card-text" style="white-space: pre-line;">{{ question.content }}</div>
        <div class="d-flex justify-content-end">
          <div class="badge badge-light p-2">
            {{ question.create_date|datetime }}
          </div>
        </div>
        <!-- 수정 / 삭제 기능 -->
        <div class="my-3">
            <a href="{{ url_for('question.modify', question_id=question.id) }}"
               class="btn btn-sm btn-outline-secondary">수정</a>
            <a href="#" class="delete btn btn-sm btn-outline-secondary"
               data-uri="{{ url_for('question.delete', question_id=question.id) }}">삭제</a>
        </div>
    </div>
  </div>
  <h5 class="border-bottom my-3 py-2">{{ question.answer_set|length }}개의 답변이 있습니다.</h5>
    {% for answer in question.answer_set %}
    <div class="card my-3">
        <div class="card-body">
            <div class="card-text" style="white-space: pre-line;">{{ answer.content }}</div>
            <div class="d-flex justify-content-end">
                <div class="badge badge-light p-2">
                  {{ answer.create_date|datetime }}
                </div>
            </div>
            <!-- 답변 수정 / 삭제 기능 -->
        <div class="my-3">
            <a href="{{ url_for('answer.modify', answer_id=answer.id) }}"
                class="btn btn-sm btn-outline-secondary">수정</a>
            <a href="#" class="delete btn btn-sm btn-outline-secondary "
            data-uri="{{ url_for('answer.delete', answer_id=answer.id) }}">삭제</a>
        </div>
        </div>
    </div>
    {% endfor %}
    <form action="{{ url_for('answer.create', question_id=question.id) }}" method="post" class="my-3">
        <div class="form-group">
            <textarea name="content" id="content" class="form-control" rows="10"></textarea>
        </div>
        <input type="submit" value="답변등록" class="btn btn-primary">
    </form>
</div>

<script type='text/javascript'>
  $(document).ready(function(){
      $(".delete").on('click', function() {  // 클래스값이 delete인 엘리먼트가 눌리면?
          if(confirm("정말로 삭제하시겠습니까?")) {  // 확인 창이 열림
              location.href = $(this).data('uri');  // data-uri 속성값으로 URL 호출
          }
      });
  });
  </script>

</body>
</html>